<!-- templates/vege/recipe.html -->

{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recipe App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
        }

        .recipe-card {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .recipe-title {
            font-size: 24px;
            color: #27ae60;
        }

        .recipe-details {
            margin-top: 10px;
        }

        .form-section {
            background-color: #ffffff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 50px;
        }
    </style>
</head>
<body>
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>ðŸ¥— Recipe App</h1>
    <form method="POST" action="{% url 'logout_view' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Logout</button>
    </form>
</div>


    <h1>ðŸ¥— Recipe App</h1>

    <div class="container form-section col-md-6 mx-auto">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="recipeName" class="form-label">Recipe Name</label>
                <input type="text" class="form-control" id="recipeName" name="name" placeholder="Enter recipe name" required>
            </div>

            <div class="mb-3">
                <label for="recipeDescription" class="form-label">Recipe Description</label>
                <textarea class="form-control" id="recipeDescription" name="description" placeholder="Enter description" required></textarea>
            </div>

            <div class="mb-3">
                <label for="recipeImage" class="form-label">Recipe Image</label>
                <input type="file" class="form-control" id="recipeImage" name="image" required>
            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
    
     <div class="container col-md-6 mx-auto mb-4">
        <form method="GET" action="{% url 'recipe' %}">
            <input type="text" name="search" class="form-control" placeholder="Search recipe by name..." value="{{ request.GET.search }}">
            <button type="submit" class="btn btn-primary mt-2">Search</button>
        </form>
    </div>

    <div class="container">
        {% for recipe in recipes %}
            <div class="recipe-card">
                <div class="recipe-title">{{ recipe.name }}</div>
                <div class="recipe-details">
                    <strong>Description:</strong> {{ recipe.description }}<br>
                    {% if recipe.image %}
                        <img src="{{ recipe.image.url }}" alt="{{ recipe.name }}" class="img-fluid mt-2" style="max-height: 300px;">
                    {% endif %}
                </div>
            </div>
            
        {% empty %}
            <p class="text-center"></p>
        {% endfor %}


        <table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Description</th>
      <th scope="col">Image</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in queryset %}
<tr>
  <th scope="row">{{ forloop.counter }}</th>
  <td>{{ item.name }}</td>
  <td>{{ item.description }}</td>
  <td>
    {% if item.image %}
      <img src="{{ item.image.url }}" alt="{{ item.name }}" style="max-height: 100px;">
    {% else %}
      No image
    {% endif %}
  </td>
  <td>
    <form method="POST" action="{% url 'delete_recipe' item.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
    </form>

    <div class="mt-2">
        <form action="{% url 'update_recipe' item.id %}" method="GET">
            <button type="submit" class="btn btn-primary btn-sm">Update</button>
        </form>
    </div>
</td>

</tr>
{% endfor %}

  </tbody>
</table>
    </div>

</body>
</html>
